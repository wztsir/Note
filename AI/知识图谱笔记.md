知识图谱笔记

## 概述

知识图谱，是结构化的语义知识库，用于迅速描述物理世界中的概念及其相互关系，通过将数据粒度从document级别降到data级别，聚合大量知识，从而实现知识的快速响应和推理。

在一项任务中，只要有关系分析的需求，知识图谱就“有可能”派的上用场。

将知识图谱理解成多关系图

知识图谱应用的前提是已经构建好了知识图谱

知识图谱的表示

当一个知识图谱拥有属性时，我们可以用属性图（Property Graph）表示。

除了属性图，知识图谱也可以用RDF来表示，它是由很多的三元组（Triples）来组成。

**一**、信息抽取

构建的前提是需要把数据从不同的数据源中抽取出来。对于垂直领域的知识图谱来说，它们的数据源主要来自两种渠道：一种是业务本身的数据，这部分数据通常包含在公司内的数据库表并以结构化的方式存储；另一种是网络上公开、抓取的数据，这些数据通常是以网页的形式存在所以是非结构化的数据。

信息抽取的难点在于处理非结构化数据。

大致由如下的步骤组成：

​	a. 实体命名识别（Name Entity Recognition）   这是一项相对比较成熟的技术，有一些现成的工具可以用来做这件事情。

​	b. 关系抽取（Relation Extraction）   

**二**、知识融合

​	a.实体统一（Entity Resolution）比如“NYC”和“New York”表面上是不同的字符串，但其实指的都是纽约这个城市，需要合并。实体统一不仅可以减少实体的种类，也可以降低图谱的稀疏性（Sparsity）   

​	b.指代消解（Coreference Resolution）文本中出现的“it”, “he”, “she”这些词到底指向哪个实体，比如在本文里两个被标记出来的“it”都指向“hotel”这个实体。

**三**、知识加工

**四**、知识更新(对于已经有一定规模的知识库而言才需要去考虑)

**五**、知识存储（Neo4j数据库）

重点与难点：搭建一个知识图谱系统的重点在于对业务的理解以及对知识图谱本身的设计

是否要用到知识图谱的决策：

![屏幕截图 2022-09-24 153549](D:\Note\AI\屏幕截图 2022-09-24 153549.png)



## 数据源

数据源而言，分为结构化数据，半结构化数据和无结构数据三类。

- 结构化数据（Structed Data），如关系数据库
- 非结构化数据，如图片、音频、视频
- 半结构化数据 如XML、JSON、百科 



## 架构

逻辑架构

在逻辑上，我们通常将知识图谱划分为两个层次：数据层和模式层。

例子

模式层：实体-关系-实体，实体-属性-性值

数据层：比尔盖茨-妻子-梅琳达·盖茨，比尔盖茨-总裁-微软

技术架构



![屏幕截图 2022-09-24 153638](D:\Note\AI\屏幕截图 2022-09-24 153638.png)

## 知识图谱的构建

构建的方式分为自顶向下和自底向上

知识图谱的基本单位，便是“实体（Entity）-关系（Relationship）-实体（Entity）”构成的三元组，这也是知识图谱的核心。

- 信息抽取：从各种类型的数据源中提取出实体、属性以及实体间的相互关系，在此基础上形成本体化的知识表达；
- 知识融合：在获得新知识之后，需要对其进行整合，以消除矛盾和歧义，比如某些实体可能有多种表达，某个特定称谓也许对应于多个不同的实体等；
- 知识加工：对于经过融合的新知识，需要经过质量评估之后（部分需要人工参与甄别），才能将合格的部分加入到知识库中，以确保知识库的质量。

## 信息抽取

实体抽取、关系抽取和属性抽取。

### 实体抽取

实体识别

命名实体识别（named entity recognition，NER）

从文本数据集中自动识别出命名实体。

### 关系抽取

将实体与实体的关系打上标签

有监督的学习方法 ：该方法将关系抽取任务当做分类问题，根据训练数据设计有效的特征，从而学习各种分类模型，然后使用训练好的分类器预测关系。该方法的问题在于需要大量的人工标注训练语料，而语料标注工作通常非常耗时耗力。
半监督的学习方法 ：该方法主要采用Bootstrapping进行关系抽取。对于要抽取的关系，该方法首先手工设定若干种子实例，然后迭代地从数据从抽取关系对应的关系模板和更多的实例。
无监督的学习方法 ：该方法假设拥有相同语义关系的实体对拥有相似的上下文信息。因此可以利用每个实体对对应上下文信息来代表该实体对的语义关系，并对所有实体对的语义关系进行聚类。

这三种方法中，有监督学习法因为能够抽取并有效利用特征，在获得高准确率和高召回率方面更有优势，是目前业界应用最广泛的一类方法。



远程监督（Distant Supervision）算法属于有监督学习算法的一种，基于已有的知识图谱推断更多的信息，所以算得上是优化  

基于DeepDive的抽取系统和基于深度学习抽取算法。

#### DeepDive算法

数据处理->数据标注->学习推理->错误分析



人工定义一些规则去进行主语自动增补

启发式规则

对于数据集做简单的预处理，就是先找到一批输入，然后做词素的集合，然后根据常见规律选出可能相关的词素，然后用这个去筛查



### 质量评价

可以采用F1-Score进行评估，其计算公式为：

![屏幕截图 2022-09-24 153706](D:\Note\AI\屏幕截图 2022-09-24 153706.png)

精确度P为识别正确的实体数和识别实体数之比；召回率R为识别正确实体数和总实体数之比。图8为本文所建立的知识抽取模型的整体评估结果，F1值大于80%，基本满足领域实体识别的一致性要求[26]，可用于润滑系统故障文本的知识抽取任务。

## 知识融合

实体消歧和共指消解

解决实体含义一对多与多对一的问题

实体消歧

实体消歧技术用于处理同名实体指代不同客观事物的问题

共指消解技术

用于处理多种表达方式对应同一实体对象的问题；

可以采用余弦距离和Jaccard相关系数相结合的方式计算润滑系统故障实体之间的相似度，通过设定阀值的方式判断待对齐实体是否匹配，实现知识融合。

![屏幕截图 2022-09-24 153718](D:\Note\AI\屏幕截图 2022-09-24 153718.png)



A（s）为实体s的属性字符串，Sim值越大，就代表两者的语义相似度就越高

结合Jaccard相关系数和余弦距离来综合判断是否融合为同一实体。

## 知识加工

知识加工主要包括3方面内容：本体构建、知识推理和质量评估。

知识推理

这一块的算法主要可以分为3大类，基于逻辑的推理、基于图的推理和基于深度学习的推理。

质量评估

可以对知识的可信度进行量化，通过舍弃置信度较低的知识来保障知识库的质量。

## 知识更新

对于有一定体量的知识库才需要去考虑知识更新

- 全面更新：指以更新后的全部数据为输入，从零开始构建知识图谱。这种方法比较简单，但资源消耗大，而且需要耗费大量人力资源进行系统维护；
- 增量更新：以当前新增数据为输入，向现有知识图谱中添加新增知识。这种方式资源消耗小，但目前仍需要大量人工干预（定义规则等），因此实施起来十分困难。

## 知识存储

常见的

图数据库Neo4j

图数据库ArangoDB

### Neo4j的优势

 所用语言：Java

特点：基于关系的图形数据库 

使用许可： GPL，其中一些特性使用 AGPL/商业许可 

协议： HTTP/REST（或嵌入在 Java中） 

可独立使用或嵌入到 Java应用程序 图形的节点和边都可以带有元数据 

很好的自带web管理功能 

使用多种算法支持路径搜索 

使用键值和关系进行索引为读操作进行优化 

支持事务（用 Java api） 

使用 Gremlin图形遍历语言支持 Groovy脚本 

支持在线备份，高级监控及高可靠性支持使用 AGPL/商业许可


## 知识图谱的常见应用

机器人智能问答系统

可以利用朴素贝叶斯分类器是一种基于概率统计的分类模型，目前被广泛应用于电网、医疗、地铁等行业智能问答技术的问题分类中

文本情感分析





